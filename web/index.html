<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<title>Spotify Visualizer</title>

<style>
    body {
        font-family: Verdana, sans-serif;
        color: #ffffff;
    }
    h1, .play-button {
        text-align: center;
    }
    #togglePlay {
        margin-bottom: 1.5em;
    }
    .song-name-lyrics {
        display: flex;
        flex-direction: column;
        text-align: center;
        border: double 6px;
        border-radius: 25px;
        width: 35%;
        margin-left: auto;
        margin-right: auto;
        overflow: auto;
    }
    .song-name-lyrics p {
        margin-top: 1em;
        margin-bottom: 1em;
    }
    form {
        margin-top: 1em;
        margin-bottom: 1em;
    }
    @keyframes move_wave {
        0% {
            transform: translateX(0) translateZ(0) scaleY(1)
        }
        50% {
            transform: translateX(-25%) translateZ(0) scaleY(0.55)
        }
        100% {
            transform: translateX(-50%) translateZ(0) scaleY(1)
        }
    }
    .waveWrapper {
        overflow: hidden;
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        margin: auto;
        z-index: -1;
    }
    .waveWrapperInner {
        position: absolute;
        width: 100%;
        overflow: hidden;
        height: 100%;
        bottom: -1px;
        background-image: linear-gradient(to top, #a0248f 30%, #5555d7 70%);
    }
    .bgTop {
        z-index: -1;
        opacity: 0.5;
    }
    .bgMiddle {
        z-index: -3;
        opacity: 0.75;
    }
    .bgBottom {
        z-index: -5;
    }
    .wave {
        position: absolute;
        left: 0;
        width: 200%;
        height: 100%;
        background-repeat: repeat no-repeat;
        background-position: 0 bottom;
        transform-origin: center bottom;
    }
    .waveTop {
        background-size: 50% 100px;
        z-index: -1;
    }
    .waveAnimation .waveTop {
        animation: move-wave 3s;
        -webkit-animation: move-wave 3s;
        -webkit-animation-delay: 1s;
        animation-delay: 1s;
    }
    .waveMiddle {
        background-size: 50% 120px;
    }
    .waveAnimation .waveMiddle {
        animation: move_wave 5s linear infinite;
    }
    .waveBottom {
        background-size: 50% 100px;
    }
    .waveAnimation .waveBottom {
        animation: move_wave 10s linear infinite;
    }
</style>
</head>

<body>
    <div class="waveWrapper waveAnimation">
        <div class="waveWrapperInner bgTop">
          <div class="wave waveTop" style="background-image: url('http://front-end-noobs.com/jecko/img/wave-top.png')"></div>
        </div>
        <div class="waveWrapperInner bgMiddle">
          <div class="wave waveMiddle" style="background-image: url('http://front-end-noobs.com/jecko/img/wave-mid.png')"></div>
        </div>
        <div class="waveWrapperInner bgBottom">
          <div class="wave waveBottom" style="background-image: url('http://front-end-noobs.com/jecko/img/wave-bot.png')"></div>
        </div>
    </div>

    <h1>Spotify Visualizer</h1>

    <div class="play-button">
        <p>Press 'Play' to listen!</p> 
        <button id="togglePlay">Play</button>
    </div>
  
    <div class="song-name-lyrics">
        <article>
            <p id="name"></p>
            <script src="tracks.js"></script>
            <script>
                    body = fetch('https://api.spotify.com/v1/me/player/currently-playing', {
                    headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer BQDLB27f4cAiUGEYkKhs1n3d39v_CodCanNa8XfCc06UoT5XbgS3fAJTzgS0PoQXz3SLUdobCo5_erX3VxvXqF4bb4DLOssHOPUnhF0YmQpfRSESduBjflGAhsRlw5st9nPY6bHpMw_ocT1JYCy_GUBelWlTzskx-vAQiuxavNp5cB4hhZCX_V61uNSwv-tmju6FH3Ut'
                }
                }).then((response) => response.json())
                .then((data) => document.getElementById("name").innerHTML = data.item.name);
            </script>
        </article>

        <script>
            function listLanguages() {
            var mylist = document.getElementById("myList");
            document.getElementById("favorite").value = mylist.options[mylist.selectedIndex].text;
            }
        </script>  
        <form>
            <b> Select your language of choice </b>  
            <select id="myList" onchange="listLanguages()">  
            <option> ---Choose language--- </option>  
            <option> English </option>  
            <option> Arabic </option>  
            <option> Azerbaijani </option>  
            <option> Chinese </option>
            <option> Czech </option> 
            <option> Danish </option> 
            <option> Dutch </option>
            <option> Esperanto </option>
            <option> Finnish </option>
            <option> French </option>
            <option> German </option>
            <option> Greek </option>
            <option> Hebrew </option>
            <option> Hindi </option>
            <option> Hungarian </option>
            <option> Indonesian </option>
            <option> Irish </option>
            <option> Italian </option>
            <option> Japanese </option>
            <option> Korean </option>
            <option> Persian </option>
            <option> Polish </option>
            <option> Portugese </option>
            <option> Russian </option>
            <option> Slovak </option>
            <option> Spanish </option>
            <option> Swedish </option>
            <option> Turkish </option>
            <option> Ukranian </option>
            </select>
        </form>

        <article>
            <p id="lyrics"></p>
            <script src="commands/lyrics.js"></script>
            <script>
                var options = {
                    apiKey: 'YHUqc2XDBg0S5eD9csE8gIVANK0z-Pc4tzG5PlUcUL6DOnEIf6Z6DLxbjxJPZewT',
                    title: song,
                    artist: artist,
                    optimizeQuery: true
                };
                getLyrics(options).then((lyrics) => document.getElementById("lyrics").innerHTML = lyrics);
            </script>
        </article>
    </div>

    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <script>
        window.onSpotifyWebPlaybackSDKReady = () => {
            const token = 'BQA-MU8PNxiQqNPyasIE4qqurR15xqD5DQ-0pSa27msHA3omOcWaA2tn3NCa4jgIqQ0UVJhhRoGDWq2_iE_56i4I--p4RAPHfSZv_sYALISi8pAhoOXhycKTKFqL1HzFHoUzz7fmfgs6cnTzaXKbzHQRoLg2JfioAHU845Y1fodQnAl2qWVmL9dLjiwfJelpPCeFAQv08OQZ2k6M5cYkx9Q';
            const player = new Spotify.Player({
                name: 'Web Playback SDK Quick Start Player',
                getOAuthToken: cb => { cb(token); },
                volume: 0.5
            });

            // Ready
            player.addListener('ready', ({ device_id }) => {
                console.log('Ready with Device ID', device_id);
            });

            // Not Ready
            player.addListener('not_ready', ({ device_id }) => {
                console.log('Device ID has gone offline', device_id);
            });

            player.addListener('initialization_error', ({ message }) => {
                console.error(message);
            });

            player.addListener('authentication_error', ({ message }) => {
                console.error(message);
            });

            player.addListener('account_error', ({ message }) => {
                console.error(message);
            });

            document.getElementById('togglePlay').onclick = function() {
              player.togglePlay();
            };

            player.connect();
        }
    </script>
</body>
</html>